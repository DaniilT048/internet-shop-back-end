<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Products</title>
</head>
<body>
<h1>Products:</h1>
<form method="get" action="/products">
    <label>Category:
        <select name="category">
            <option value="">All</option>
            <option value="BALLS" <%= category === 'BALLS' ? 'selected' : '' %>>Balls</option>
            <option value="DUMBBELLS" <%= category === 'DUMBBELLS' ? 'selected' : '' %>>Dumbbells</option>
            <option value="MATS" <%= category === 'MATS' ? 'selected' : '' %>>Mats</option>
            <option value="ACCESSORIES" <%= category === 'ACCESSORIES' ? 'selected' : '' %>>Accessories</option>
        </select>
    </label>
    <label>Sort by price:
        <select name="sort">
            <option value="">Default</option>
            <option value="asc" <%= sort === 'asc' ? 'selected' : '' %>>Low to High</option>
            <option value="desc" <%= sort === 'desc' ? 'selected' : '' %>>High to Low</option>
        </select>
    </label>
    <button type="submit">Apply</button>
</form>
<hr>
<% if (products.length > 0) { %>
    <% products.forEach(product => { %>
        <div>
            <h2><%= product.name %></h2>
            <img src="/images/<%= product.image %>" alt="<%= product.name %>" width="200"/>
            <p>Price: $<%= product.price %></p>
            <a href="/products/<%= product._id %>">View</a>
        </div>
    <% }) %>
<% } else { %>
    <p>No products found.</p>
<% } %>
</body>
</html>